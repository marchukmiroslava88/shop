(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{51:function(e,t,a){e.exports=a(64)},56:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"all",(function(){return L}));var r=a(0),c=a.n(r),i=a(23),l=a.n(i),o=(a(56),a(57),a(7)),s=a(12),u=a(17),m=a(16),d=a(31),p=a(45),h=a(9),f=a(19),b=a(6),E=a(30),v=a(13),y=a(22),g=a(49),O=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={quantity:n.props.qty},n.changeVal=n.changeVal.bind(Object(E.a)(n)),n.onChangeVal=n.onChangeVal.bind(Object(E.a)(n)),n.set=n.set.bind(Object(E.a)(n)),n}return Object(s.a)(a,[{key:"set",value:function(e){var t=Math.min(Math.max(e,this.props.min),this.props.max);this.setState({quantity:t}),this.props.onChange(t)}},{key:"decrease",value:function(){this.set(this.state.quantity-1)}},{key:"increase",value:function(){this.set(this.state.quantity+1)}},{key:"onChangeVal",value:function(e){this.set(+e.target.value)}},{key:"changeVal",value:function(){this.set(this.state.quantity)}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(g.a,null,c.a.createElement(v.a,{variant:"outline-secondary",style:{width:"35px"},onClick:function(){e.decrease()}},"-"),c.a.createElement(y.a.Control,{type:"text",value:this.state.quantity,onBlur:this.changeVal,onChange:this.onChangeVal}),c.a.createElement(v.a,{variant:"outline-secondary",style:{width:"35px"},onClick:function(){e.increase()}},"+")))}}]),a}(c.a.Component),j=a(36),C=Object(h.b)("stores")(Object(h.c)(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.stores.cart,t=e.productsDetailed.get().map((function(t){return c.a.createElement("tr",{key:t.id},c.a.createElement("td",null,t.title),c.a.createElement("td",null,t.price),c.a.createElement("td",null,c.a.createElement(O,{min:1,max:5,qty:t.quantity,onChange:function(a){return e.changeQty(t.id,a)}})),c.a.createElement("td",null,t.price*t.quantity,"$"),c.a.createElement("td",null,c.a.createElement(v.a,{variant:"danger",onClick:function(){return e.deleteProduct(t.id)}},"x")))}));return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"Cart"),c.a.createElement(j.a,{bordered:!0,hover:!0},c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",null,"Title"),c.a.createElement("td",null,"Price"),c.a.createElement("td",null,"Count"),c.a.createElement("td",{colSpan:"2"},"Total")),t,c.a.createElement("tr",null,c.a.createElement("td",{colSpan:"3"},"Total price: ",e.totalPrice.get(),"$"),c.a.createElement("td",{colSpan:"2"},c.a.createElement(f.b,{to:"/order"},c.a.createElement(v.a,null,"Checkout")))))))}}]),a}(c.a.Component))),k=a(34),x=Object(h.b)("stores")(Object(h.c)(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleSubmit=function(t){var a=e.props.stores.order;a.onSubmit(t),a.isValidationPassed.get()&&e.props.history.push("/result")},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.stores.order;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"Order"),c.a.createElement(y.a,{onSubmit:this.handleSubmit},e.fields.map((function(t){return c.a.createElement(y.a.Group,{key:t.name},c.a.createElement(y.a.Label,null,t.label),c.a.createElement(y.a.Control,{onChange:e.handleChange,name:t.name,type:t.type,placeholder:t.placeholder}),e.errors[t.name]?c.a.createElement(k.a,{variant:"danger"},e.errors[t.name]):"")})),c.a.createElement(y.a.Group,null,c.a.createElement(y.a.Check,{onChange:e.handleChange,name:"isConfirm",type:"checkbox",label:"I consent to the processing and use of personal data"}),e.errors.isConfirm?c.a.createElement(k.a,{variant:"danger"},e.errors.isConfirm):""),c.a.createElement(v.a,{variant:"primary",type:"submit"},"Submit")))}}]),a}(c.a.Component))),q=Object(h.b)("stores")((function(e){var t=e.stores.order.lastOrderCache.get(),a=t.products.map((function(e){return c.a.createElement("tr",{key:e.id},c.a.createElement("td",null,e.title),c.a.createElement("td",null,e.price),c.a.createElement("td",null,e.price*e.quantity,"$"))}));return c.a.createElement(j.a,{bordered:!0,hover:!0},c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",{colSpan:3},c.a.createElement(k.a,{variant:"success"},"Your order is accepted!"))),a,c.a.createElement("tr",null,c.a.createElement("td",{colSpan:3},"Total price: ",t.totalPrice,"$"))))})),S=a(10),w=(a(63),a(26)),P=a(4),N=function e(t){var a=this;Object(o.a)(this,e),this.products=Object(P.o)([]),this.totalPrice=Object(P.g)((function(){var e=a.productsDetailed.get().reduce((function(e,t){return e+t.price*t.quantity}),0);return parseFloat(e).toFixed(2)})),this.changeQty=Object(P.f)((function(e,t){a.products.find((function(t){return t.id===e})).quantity=t})),this.deleteProduct=Object(P.f)((function(e){a.products.splice(a.products.findIndex((function(t){return t.id===e})),1)})),this.addToCart=Object(P.f)((function(e){a.products.find((function(t){return t.id===e.id}))||a.products.push(Object(w.a)(Object(w.a)({},e),{},{quantity:1}))})),this.productsList=Object(P.g)((function(){return a.products.map((function(e){return e.id}))})),this.productsDetailed=Object(P.g)((function(){return a.products.map((function(e){var t=a.rootStore.products.getById(e.id);return Object(w.a)(Object(w.a)({},t),{},{quantity:e.quantity})}))})),this.reset=Object(P.f)((function(){a.products.clear()})),this.rootStore=t},I=function(){function e(t){var a=this;Object(o.a)(this,e),this.items=Object(P.o)([]),this.load=Object(P.f)((function(){return new Promise((function(e){a.api.all().then((function(t){a.items=t,e(!0)}))}))})),this.rootStore=t,this.api=this.rootStore.api.products}return Object(s.a)(e,[{key:"getById",value:function(e){return this.items.find((function(t){return t.id===e}))}}]),e}(),T=function(){function e(t){var a=this;Object(o.a)(this,e),this.order=Object(P.o)([]),this.fields=Object(P.o)([{name:"name",type:"text",placeholder:"Enter your full name",label:"Full name"},{name:"email",type:"email",placeholder:"example@email.com",label:"Email"},{name:"phone",type:"phone",placeholder:"0937777777",label:"Phone"}]),this.errors=Object(P.o)({}),this.isValid=!1,this.lastOrderCache=Object(P.g)((function(){var e=a.rootStore.cart.productsDetailed.get(),t=a.rootStore.cart.totalPrice.get(),n=e.map((function(e){var t=a.rootStore.products.getById(e.id);return Object(w.a)(Object(w.a)({},t),{},{quantity:e.quantity})}));return a.rootStore.cart.reset(),{products:n,totalPrice:t}})),this.handleChange=Object(P.f)((function(e){a.fields[e.target.name]=e.target.value,a.errors[e.target.name]=""})),this.isValidationPassed=Object(P.g)((function(){return a.isValid})),this.rootStore=t}return Object(s.a)(e,[{key:"onSubmit",value:function(e){e.preventDefault(),this.validateForm()}},{key:"validateForm",value:function(){var e=this.fields;if(e.name||(this.errors.name="Cannot be empty"),"undefined"!==typeof e.name&&(e.name.match(/^[a-zA-Z\u0430-\u044f\u0410-\u044f\s]+$/)||(this.errors.name="Only letters")),e.email||(this.errors.email="Cannot be empty"),"undefined"!==typeof e.email){var t=e.email.lastIndexOf("@"),a=e.email.lastIndexOf(".");t<a&&t>0&&-1===e.email.indexOf("@@")&&a>2&&e.email.length-a>2||(this.errors.email="Email is not valid")}e.phone||(this.errors.phone="Cannot be empty"),"undefined"!==typeof e.phone&&(e.phone.match(/^\d{10}$/)||(this.errors.phone="Incorrect number, should be 10 numbers")),e.isConfirm||(this.errors.isConfirm="Please confirm"),this.isValid=Object.values(this.errors).every((function(e){return!e}))}}]),e}();var V="https://fakestoreapi.com/";function L(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:V;return fetch(a+e,t).then((function(e){return 200!==e.status?e.text().then((function(e){throw new Error(e)})):e.json()}))}("products")}var F=new function e(){Object(o.a)(this,e),this.api={products:n},this.cart=new N(this),this.products=new I(this),this.order=new T(this)},$=function(){return c.a.createElement("div",{className:"text-center"},c.a.createElement("img",{src:"assets/icons/loader.gif",alt:""}))},B=Object(h.b)("stores")(Object(h.c)(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={showLoader:!0},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;F.products.load().finally((function(){e.setState({showLoader:!1})}))}},{key:"render",value:function(){var e=this.props.stores.products.items,t=this.props.stores.cart,a=t.productsList.get();return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"Products"),this.state.showLoader?c.a.createElement($,null):c.a.createElement("div",{className:"row"},e.map((function(e){return c.a.createElement("div",{className:"col-lg-3 col-md-6 mb-4",key:e.id},c.a.createElement(S.a,null,a.includes(e.id)&&c.a.createElement("img",{className:"remove-icon",src:"assets/icons/remove-icon.png",onClick:function(){return t.deleteProduct(e.id)},alt:""}),c.a.createElement(S.a.Link,{as:f.b,to:"/"+e.id,className:"card-img"},c.a.createElement(S.a.Img,{variant:"top",src:e.image})),c.a.createElement(S.a.Body,null,c.a.createElement(S.a.Title,null,c.a.createElement(S.a.Link,{as:f.b,to:"/"+e.id},e.title)),c.a.createElement(S.a.Text,null,e.description)),c.a.createElement(S.a.Footer,null,c.a.createElement(S.a.Text,{className:"d-flex justify-content-between align-items-center"},c.a.createElement("span",null,c.a.createElement("b",null,"Price:")," ",e.price,"$"),a.includes(e.id)?c.a.createElement(v.a,{variant:"success"},"Item in cart"):c.a.createElement(v.a,{variant:"info",onClick:function(){return t.addToCart(e)}},"Add to cart")))))}))))}}]),a}(c.a.Component))),D=Object(h.b)("stores")(Object(h.c)(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.stores.cart,t=e.productsList.get(),a=this.props.match.params.id,n=this.props.stores.products.items.find((function(e){return e.id===+a}));return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-4 col-md-6"},c.a.createElement(S.a,{className:"mb-4 card"},c.a.createElement(S.a.Img,{variant:"top",src:n.image}))),c.a.createElement("div",{className:"col-lg-8 col-md-6"},c.a.createElement("span",{className:"in_stock"},"in stock"),c.a.createElement(S.a.Body,null,c.a.createElement(S.a.Title,null,n.title),c.a.createElement(S.a.Text,null,n.description)),c.a.createElement(S.a.Footer,null,c.a.createElement(S.a.Text,{className:"d-flex justify-content-between align-items-center"},c.a.createElement("span",null,c.a.createElement("b",null,"Price:")," ",n.price,"$"),t.includes(n.id)?c.a.createElement(v.a,{variant:"danger",onClick:function(){return e.deleteProduct(n.id)}},"Remove from cart"):c.a.createElement(v.a,{variant:"info",onClick:function(){return e.addToCart(n)}},"Add to cart")))))}}]),a}(c.a.Component))),A=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",null,"How it works:"),c.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Debitis delectus deleniti earum facere, hic id laborum modi molestias nemo neque non numquam perferendis possimus qui quisquam reprehenderit soluta ullam ut."))},M=Object(h.c)(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement(f.a,null,c.a.createElement(p.a,{bg:"light",expand:"lg",className:"mb-3"},c.a.createElement(p.a.Collapse,{id:"basic-navbar-nav"},c.a.createElement(d.a,{className:"mr-auto"},c.a.createElement(d.a.Item,null,c.a.createElement(d.a.Link,{exact:!0,as:f.c,to:"/"},"Catalog")),c.a.createElement(d.a.Item,null,c.a.createElement(d.a.Link,{as:f.c,to:"/delivery"},"Pickup & delivery"))),c.a.createElement(f.c,{to:"/cart"},c.a.createElement("img",{className:"shopping-cart-icon",src:"assets/icons/shopping-cart.png",alt:""})))),c.a.createElement(b.c,null,c.a.createElement(b.a,{exact:!0,path:"/",component:B}),c.a.createElement(b.a,{path:"/cart",component:C}),c.a.createElement(b.a,{path:"/order",component:x}),c.a.createElement(b.a,{path:"/result",component:q}),c.a.createElement(b.a,{path:"/delivery",component:A}),c.a.createElement(b.a,{path:"/:id",component:D}))))}}]),a}(c.a.Component));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(h.a,{stores:F},c.a.createElement(M,null)),","),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.b033b85e.chunk.js.map